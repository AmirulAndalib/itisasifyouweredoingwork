"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(){var n=!1,e=[],o=function(o){if(!n)return void e.push(o);"function"==typeof o&&o()},t=function(n){if(Array.isArray(n))for(var e=null;n.length;)"function"==typeof(e=n.splice(0,1)[0])&&e()},i=function(n){for(var e={},o=0,t=arguments.length;o<t;o++)if(arguments[o])for(var i in arguments[o])arguments[o].hasOwnProperty(i)&&(e[i]=arguments[o][i]);return e},a=function(n){n&&DTVideos.players.push(n)},l=function(n){if(n)for(var e=DTVideos.players.length;e--;)DTVideos.players[e]===n&&DTVideos.players.splice(e,1)},r=function(e){if(n)for(var o=DTVideos.players.length;o--;)DTVideos.players[o]!==e&&DTVideos.players[o].pause(!0)},s=function(n,e){var o=parseInt(e)||1280;return n?"//content.jwplatform.com/videos/"+n+"-"+o+".mp4":""},u=function(n,e){for(var o=parseInt(e)||1280,t=[["Web",480],["SD",720],["HD",1280]],i=[],a=0,l=t.length;a<l;a++)i.push({file:DTVideos.jwplayerFile(n,t[a][1]),label:t[a][0]});for(var a=0,l=t.length;a<l;a++){if(o<=t[a][1]){i[a].default=!0;break}a===l-1&&(i[a].default=!0)}return i},f=function(n){return n?"//content.jwplatform.com/thumbs/"+n+".jpg":""},c=function(n){return n?"//content.jwplatform.com/related6/"+n+".xml":""},d=function(n){return n?"//content.jwplatform.com/feeds/"+n+".rss":""},p=function(n,e,o){n=n||"",e=e||{},o=o||{};var t=this,r={aspectratio:"16:9",autostart:!1,ga:{idstring:"title",label:"mediaid"},image:"",mute:!1,playlist:"",primary:"html5",related:null,sharing:{code:'<script src="//content.jwplatform.com/players/MEDIAID-83w7PVgg.js"><\/script>'},skin:{name:"dt"},width:"100%"},s={content_id:"",discovery:!1,playlist:[],quality:null},u=i(r,e),f=i(s,o),c=null,d=null,p=!1,y=!1,m=[],v=function(){if((window.XMLHttpRequest||!window.ajaxurl)&&f.content_id&&!y){y=!0;var n=new XMLHttpRequest;n.open("GET",encodeURI(window.ajaxurl+"?action=dtvideos_jwplayer_discovery&content_id="+f.content_id+"&type=playlist&width=640")),n.onload=function(){if(200===n.status){var e=JSON.parse(n.responseText);if("OK"===e.status&&e.data)for(var o=e.data,t=0,i=o.length;t<i;t++)if(o[t].file){var a={};a.file=o[t].file,o[t].image&&(a.image=o[t].image),m.push(a)}}},n.send()}};t.get_original_player=function(){return c||null},t.play=function(n){n=void 0===n||!!n,c&&(p?c.play(n):c.on("ready",function(){c.play(n)}))},t.pause=function(n){n=void 0===n||!!n,c&&(p?c.pause(n):c.on("ready",function(){c.pause(n)}))},t.remove=function(n){if(c)if(c.once("remove",function(){"function"==typeof n&&n()}),"buffering"===c.getState()){var e=!1;c.once("stop",function(){e||(e=!0,c.remove())}).once("pause",function(){e||(e=!0,c.remove())}).once("adPause",function(){e||(e=!0,c.remove())}).once("firstFrame",function(){c.pause(!0),c.stop()}).once("adImpression",function(){c.pause(!0),c.stop()}).once("adStarted",function(){c.pause(!0),c.stop()}).once("time",function(){c.pause(!0),c.stop()}).once("adTime",function(){c.pause(!0),c.stop()}),c.pause(!0),c.stop(),l(c)}else p?(c.pause(!0),c.stop(),l(c),setTimeout(function(){c.remove()},10)):c.on("ready",function(){c.pause(!0),c.stop(),l(c),setTimeout(function(){c.remove()},10)})},t.get_state=function(){return c?c.getState():""},t.load=function(n){if(c&&n){var e=null;d&&(e=d.getBoundingClientRect().width||e),c.load({image:DTVideos.jwplayerImage(n),sources:DTVideos.jwplayerSources(n,e),mediaid:n})}},t.resize=function(n,e){n=n||"100%",e=e||"100%",c&&c.resize&&c.resize(n,e)},function(){if(window.jwplayer&&n&&(d=document.getElementById(n))){if(f.content_id){if("string"==typeof u.playlist&&(u.playlist=null),!u.file&&!u.sources){var e="number"==typeof u.width&&u.width?u.width:d.getBoundingClientRect().width||null;u.sources=DTVideos.jwplayerSources(f.content_id,e)}u.image||(u.image=DTVideos.jwplayerImage(f.content_id))}if(u.related&&"string"==typeof u.related&&(u.related={onclick:"play",file:u.related}),f.content_id&&!u.mediaid&&(u.mediaid=f.content_id),c=jwplayer(n).setup(u).on("ready",function(){p=!0})){if(a(c),c.on("play",function(n){DTVideos.pauseAll(c)}).on("adPlay",function(n){DTVideos.pauseAll(c)}),"function"==typeof onJWPlayerEvent&&c.on("ready",function(){onJWPlayerEvent("onReady",c,[])}).on("playlist",function(n){onJWPlayerEvent("onPlaylist",c,[n.playlist])}).on("playlistItem",function(n){onJWPlayerEvent("onPlaylistItem",c,[n.index,n.playlist])}).on("playlistComplete",function(n){onJWPlayerEvent("onPlaylistComplete",c,[])}).on("bufferChange",function(n){onJWPlayerEvent("onBufferChange",c,[n.buffer])}).on("firstFrame",function(){onJWPlayerEvent("onFirstFrame",c,[])}).on("play",function(n){onJWPlayerEvent("onPlay",c,[n.oldstate])}).on("pause",function(n){onJWPlayerEvent("onPause",c,[n.oldstate])}).on("buffer",function(n){onJWPlayerEvent("onBuffer",c,[n.oldstate])}).on("idle",function(n){onJWPlayerEvent("onIdle",c,[n.oldstate])}).on("complete",function(n){onJWPlayerEvent("onComplete",c,[])}).on("error",function(n){onJWPlayerEvent("onError",c,[n.message])}).on("seek",function(n){onJWPlayerEvent("onSeek",c,[n.position,n.offset])}).on("time",function(n){onJWPlayerEvent("onTime",c,[n.duration,n.position])}).on("mute",function(n){onJWPlayerEvent("onMute",c,[n.mute])}).on("volume",function(n){onJWPlayerEvent("onVolume",c,[n.volume])}).on("fullscreen",function(n){onJWPlayerEvent("onFullscreen",c,[n.fullscreen])}).on("resize",function(n){onJWPlayerEvent("onResize",c,[n.width,n.height])}).on("levels",function(n){onJWPlayerEvent("onQualityLevels",c,[n.levels])}).on("levelsChanged",function(n){onJWPlayerEvent("onQualityChange",c,[n.currentQuality])}).on("audioTracks",function(n){onJWPlayerEvent("onAudioTracks",c,[n.levels])}).on("audioTrackChange",function(n){onJWPlayerEvent("onAudioTrackChange",c,[n.currentTrack])}).on("captionsList",function(n){onJWPlayerEvent("onCaptionsList",c,[n.tracks])}).on("captionsChanged",function(n){onJWPlayerEvent("onCaptionsChange",c,[n.track])}).on("controls",function(n){onJWPlayerEvent("onControls",c,[n.controls])}).on("displayClick",function(n){onJWPlayerEvent("onDisplayClick",c,[])}).on("adClick",function(n){onJWPlayerEvent("onAdClick",c,[n.tag])}).on("adCompanions",function(n){onJWPlayerEvent("onAdCompanions",c,[n.tag,n.companions])}).on("adComplete",function(n){onJWPlayerEvent("onAdComplete",c,[n.tag])}).on("adSkipped",function(n){onJWPlayerEvent("onAdSkipped",c,[n.tag])}).on("adError",function(n){onJWPlayerEvent("onAdError",c,[n.tag,n.message])}).on("adStarted",function(n){onJWPlayerEvent("onAdStarted",c,[n.tag])}).on("adImpression",function(n){onJWPlayerEvent("onAdImpression",c,[n.tag])}).on("adTime",function(n){onJWPlayerEvent("onAdTime",c,[n.tag,n.position,n.duration,n.sequence])}).on("beforePlay",function(n){onJWPlayerEvent("onBeforePlay",c,[])}).on("beforeComplete",function(n){onJWPlayerEvent("onBeforeComplete",c,[n.tag])}).on("adPause",function(n){onJWPlayerEvent("onAdPause",c,[n.tag])}).on("adPlay",function(n){onJWPlayerEvent("onAdPlay",c,[n.tag])}).on("meta",function(n){onJWPlayerEvent("onMeta",c,[n.metadata])}),c.onBeforeComplete(function(){if(m.length){var n=m.shift();c.load([n]),c.play(!0),f.discovery&&!m.length&&v()}}),f.playlist&&f.playlist.length)for(var o=f.data,t=0,i=o.length;t<i;t++)if(o[t].file){var l={};l.file=o[t].file,o[t].image&&(l.image=o[t].image),m.push(l)}f.discovery&&!m.length&&v();var r=document.querySelector("body.single-video");r&&DTEvent.on("jwplayer:onReady",function(n){if("object"!==("undefined"==typeof DTAds?"undefined":_typeof(DTAds)))return void console.log("DTVideos: DTAds obj not found");var e=0;setInterval(function(){e%30==0&&(DTAds.Ads.refreshEl(r),console.log("DTVidoes: Refreshed all slots.")),e++},1e3)})}}}()};if(Array.isArray(window.DTVideos)&&(e=window.DTVideos),window.DTVideos={push:o,players:[],pauseAll:r,jwplayerFile:s,jwplayerSources:u,jwplayerImage:f,jwplayerRelatedXml:c,jwplayerFeed:d,Jwplayer:p},window.jwplayer)n=!0,t(e);else{var y=document.getElementById("jwplayer-script");y&&y.addEventListener("load",function(){n=!0,t(e)})}}();